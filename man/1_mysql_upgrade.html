<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Tue Aug  2 15:36:08 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>MYSQL_UPGRADE</title>

</head>
<body>

<h1 align="center">MYSQL_UPGRADE</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#AUTHOR">AUTHOR</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">mysql_upgrade
&minus; check tables for MySQL upgrade</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="35%">


<p style="margin-top: 1em"><b>mysql_upgrade
[</b><i>options</i><b>]</b></p> </td>
<td width="54%">
</td></tr>
</table>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>mysql_upgrade</b>
examines all tables in all databases for incompatibilities
with the current version of MySQL Server.
<b>mysql_upgrade</b> also upgrades the system tables so that
you can take advantage of new privileges or capabilities
that might have been added.</p>


<p style="margin-left:11%; margin-top: 1em"><b>mysql_upgrade</b>
should be executed each time you upgrade MySQL. It
supersedes the older <b>mysql_fix_privilege_tables</b>
script, which should no longer be used.</p>

<p style="margin-left:11%; margin-top: 1em">If a table is
found to have a possible incompatibility,
<b>mysql_upgrade</b> performs a table check. If any problems
are found, a table repair is attempted. If the table cannot
be repaired, see Section&nbsp;2.4.4, &ldquo;Rebuilding or
Repairing Tables or Indexes&rdquo; for manual table repair
strategies.</p>


<p style="margin-left:17%; margin-top: 1em"><b><big>Note</big></b>
<br>
On Windows Server 2008 and Windows Vista, you must run
<b>mysql_upgrade</b> with administrator privileges. You can
do this by running a Command Prompt as Administrator and
running the command. Failure to do so may result in the
upgrade failing to execute correctly.</p>


<p style="margin-left:17%; margin-top: 1em"><b><big>Caution</big></b>
<br>
You should always back up your current MySQL installation
<i>before</i> performing an upgrade. See Section&nbsp;6.2,
&ldquo;Database Backup Methods&rdquo;.</p>

<p style="margin-left:17%; margin-top: 1em">Some upgrade
incompatibilities may require special handling before you
upgrade your MySQL installation and run
<b>mysql_upgrade</b>. See Section&nbsp;2.4.1,
&ldquo;Upgrading MySQL&rdquo;, for instructions on
determining whether any such incompatibilities apply to your
installation and how to handle them.</p>

<p style="margin-left:11%; margin-top: 1em">To use
<b>mysql_upgrade</b>, make sure that the server is running,
and then invoke it like this:</p>

<p style="margin-left:17%; margin-top: 1em">shell&gt;
<b>mysql_upgrade [</b><i>options</i><b>]</b></p>

<p style="margin-left:11%; margin-top: 1em">After running
<b>mysql_upgrade</b>, stop the server and restart it so that
any changes made to the system tables take effect.</p>


<p style="margin-left:11%; margin-top: 1em"><b>mysql_upgrade</b>
executes the following commands to check and repair tables
and to upgrade the system tables:</p>

<p style="margin-left:17%; margin-top: 1em">mysqlcheck
&minus;&minus;all&minus;databases
&minus;&minus;check&minus;upgrade
&minus;&minus;auto&minus;repair <br>
mysql &lt; <i>fix_priv_tables</i> <br>
mysqlcheck &minus;&minus;all&minus;databases
&minus;&minus;check&minus;upgrade
&minus;&minus;fix&minus;db&minus;names
&minus;&minus;fix&minus;table&minus;names</p>

<p style="margin-left:11%; margin-top: 1em">Notes about the
preceding commands:</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Because
<b>mysql_upgrade</b> invokes <b>mysqlcheck</b> with the
<b>&minus;&minus;all&minus;databases</b> option, it
processes all tables in all databases, which might take a
long time to complete. Each table is locked and therefore
unavailable to other sessions while it is being processed.
Check and repair operations can be time&minus;consuming,
particularly for large tables.</p>

<p style="margin-left:17%; margin-top: 1em">&bull; For
details about what checks the
<b>&minus;&minus;check&minus;upgrade</b> option entails, see
the description of the FOR UPGRADE option of the CHECK TABLE
statement (see Section&nbsp;12.4.2.3, &ldquo;CHECK TABLE
Syntax&rdquo;).</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<i>fix_priv_tables</i> represents a script generated
internally by <b>mysql_upgrade</b> that contains SQL
statements to upgrade the tables in the mysql database.</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Prior to
MySQL 5.1.31, <b>mysql_upgrade</b> does not run the second
<b>mysqlcheck</b> command, which is necessary to
re&minus;encode database or table names that contain
nonalphanumeric characters. (They still appear after the
upgrade with the #mysql50# prefix described in
Section&nbsp;8.2.3, &ldquo;Mapping of Identifiers to File
Names&rdquo;.) If you have such database or table names,
execute the second <b>mysqlcheck</b> command manually after
executing <b>mysql_upgrade</b>.</p>

<p style="margin-left:11%; margin-top: 1em">All checked and
repaired tables are marked with the current MySQL version
number. This ensures that next time you run
<b>mysql_upgrade</b> with the same version of the server, it
can tell whether there is any need to check or repair the
table again.</p>


<p style="margin-left:11%; margin-top: 1em"><b>mysql_upgrade</b>
also saves the MySQL version number in a file named
mysql_upgrade_info in the data directory. This is used to
quickly check whether all tables have been checked for this
release so that table&minus;checking can be skipped. To
ignore this file and perform the check regardless, use the
<b>&minus;&minus;force</b> option.</p>

<p style="margin-left:11%; margin-top: 1em">If you install
MySQL from RPM packages on Linux, you must install the
server and client RPMs. <b>mysql_upgrade</b> is included in
the server RPM but requires the client RPM because the
latter includes <b>mysqlcheck</b>. (See Section&nbsp;2.6.1,
&ldquo;Installing MySQL from RPM Packages on
Linux&rdquo;.)</p>

<p style="margin-left:11%; margin-top: 1em">In MySQL 5.1.7,
<b>mysql_upgrade</b> was added as a shell script and worked
only for Unix systems. As of MySQL 5.1.10,
<b>mysql_upgrade</b> is an executable binary and is
available on all systems.</p>


<p style="margin-left:11%; margin-top: 1em"><b>mysql_upgrade</b>
supports the following options, which can be specified on
the command line or in the [mysql_upgrade] and [client]
option file groups. Other options are passed to
<b>mysqlcheck</b>. For example, it might be necessary to
specify the
<b>&minus;&minus;password[=</b><i>password</i><b>]</b>
option. <b>mysql_upgrade</b> also supports the options for
processing option files described at Section&nbsp;4.2.3.3.1,
&ldquo;Command-Line Options that Affect Option-File
Handling&rdquo;.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;help</b></p>

<p style="margin-left:17%; margin-top: 1em">Display a short
help message and exit.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;basedir=</b><i>path</i></p>

<p style="margin-left:17%; margin-top: 1em">The path to the
MySQL installation directory. This option is accepted for
backward compatibility but ignored.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;datadir=</b><i>path</i></p>

<p style="margin-left:17%; margin-top: 1em">The path to the
data directory. This option is accepted for backward
compatibility but ignored.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;debug&minus;check</b></p>

<p style="margin-left:17%; margin-top: 1em">Print some
debugging information when the program exits. This option
was added in MySQL 5.1.21.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;debug&minus;info</b>, <b>&minus;T</b></p>

<p style="margin-left:17%; margin-top: 1em">Print debugging
information and memory and CPU usage statistics when the
program exits. This option was added in MySQL 5.1.21.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;force</b></p>

<p style="margin-left:17%; margin-top: 1em">Ignore the
mysql_upgrade_info file and force execution of
<b>mysqlcheck</b> even if <b>mysql_upgrade</b> has already
been executed for the current version of MySQL.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;tmpdir=</b><i>path</i>, <b>&minus;t</b>
<i>path</i></p>

<p style="margin-left:17%; margin-top: 1em">The path name
of the directory to use for creating temporary files. This
option was added in MySQL 5.1.25.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;user=</b><i>user_name</i>, <b>&minus;u</b>
<i>user_name</i></p>

<p style="margin-left:17%; margin-top: 1em">The MySQL user
name to use when connecting to the server. The default user
name is root.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;verbose</b></p>

<p style="margin-left:17%; margin-top: 1em">Verbose mode.
Print more information about what the program does.</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
<b>&minus;&minus;write&minus;binlog</b></p>

<p style="margin-left:17%; margin-top: 1em">Cause binary
logging to be enabled while <b>mysql_upgrade</b> runs. This
is the default behavior; to disable binary logging during
the upgrade, use the inverse of this option (that is, start
the program with
<b>&minus;&minus;skip&minus;write&minus;binlog</b>).</p>

<p style="margin-left:17%; margin-top: 1em">This option was
introduced in MySQL 5.1.40.</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Copyright
2007-2008 MySQL AB, 2008-2010 Sun Microsystems, Inc.</p>

<p style="margin-left:11%; margin-top: 1em">This
documentation is free software; you can redistribute it
and/or modify it only under the terms of the GNU General
Public License as published by the Free Software Foundation;
version 2 of the License.</p>

<p style="margin-left:11%; margin-top: 1em">This
documentation is distributed in the hope that it will be
useful, but WITHOUT ANY WARRANTY; without even the implied
warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
PURPOSE. See the GNU General Public License for more
details.</p>

<p style="margin-left:11%; margin-top: 1em">You should have
received a copy of the GNU General Public License along with
the program; if not, write to the Free Software Foundation,
Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301
USA or see http://www.gnu.org/licenses/.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">For more
information, please refer to the MySQL Reference Manual,
which may already be installed locally and which is also
available online at http://dev.mysql.com/doc/.</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Sun
Microsystems, Inc. (http://www.mysql.com/).</p>
<hr>
</body>
</html>
