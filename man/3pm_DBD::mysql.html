<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Mon Aug  8 15:52:50 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>DBD::mysql</title>

</head>
<body>

<h1 align="center">DBD::mysql</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#EXAMPLE">EXAMPLE</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#DATABASE HANDLES">DATABASE HANDLES</a><br>
<a href="#STATEMENT HANDLES">STATEMENT HANDLES</a><br>
<a href="#TRANSACTION SUPPORT">TRANSACTION SUPPORT</a><br>
<a href="#MULTIPLE RESULT SETS">MULTIPLE RESULT SETS</a><br>
<a href="#MULTITHREADING">MULTITHREADING</a><br>
<a href="#ASYNCHRONOUS QUERIES">ASYNCHRONOUS QUERIES</a><br>
<a href="#INSTALLATION">INSTALLATION</a><br>
<a href="#WIN32 INSTALLATION">WIN32 INSTALLATION</a><br>
<a href="#AUTHORS">AUTHORS</a><br>
<a href="#CONTRIBUTIONS">CONTRIBUTIONS</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>
<a href="#MAILING LIST SUPPORT">MAILING LIST SUPPORT</a><br>
<a href="#ADDITIONAL DBI INFORMATION">ADDITIONAL DBI INFORMATION</a><br>
<a href="#BUG REPORTING, ENHANCEMENT/FEATURE REQUESTS">BUG REPORTING, ENHANCEMENT/FEATURE REQUESTS</a><br>
<a href="#POD ERRORS">POD ERRORS</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">DBD::mysql
&minus; MySQL driver for the Perl5 Database Interface
(DBI)</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<pre style="margin-left:11%; margin-top: 1em">    use DBI;
    $dsn = &quot;DBI:mysql:database=$database;host=$hostname;port=$port&quot;;
    $dbh = DBI&minus;&gt;connect($dsn, $user, $password);
    $drh = DBI&minus;&gt;install_driver(&quot;mysql&quot;);
    @databases = DBI&minus;&gt;data_sources(&quot;mysql&quot;);
       or
    @databases = DBI&minus;&gt;data_sources(&quot;mysql&quot;,
      {&quot;host&quot; =&gt; $host, &quot;port&quot; =&gt; $port, &quot;user&quot; =&gt; $user, password =&gt; $pass});
    $sth = $dbh&minus;&gt;prepare(&quot;SELECT * FROM foo WHERE bla&quot;);
       or
    $sth = $dbh&minus;&gt;prepare(&quot;LISTFIELDS $table&quot;);
       or
    $sth = $dbh&minus;&gt;prepare(&quot;LISTINDEX $table $index&quot;);
    $sth&minus;&gt;execute;
    $numRows = $sth&minus;&gt;rows;
    $numFields = $sth&minus;&gt;{'NUM_OF_FIELDS'};
    $sth&minus;&gt;finish;
    $rc = $drh&minus;&gt;func('createdb', $database, $host, $user, $password, 'admin');
    $rc = $drh&minus;&gt;func('dropdb', $database, $host, $user, $password, 'admin');
    $rc = $drh&minus;&gt;func('shutdown', $host, $user, $password, 'admin');
    $rc = $drh&minus;&gt;func('reload', $host, $user, $password, 'admin');
    $rc = $dbh&minus;&gt;func('createdb', $database, 'admin');
    $rc = $dbh&minus;&gt;func('dropdb', $database, 'admin');
    $rc = $dbh&minus;&gt;func('shutdown', 'admin');
    $rc = $dbh&minus;&gt;func('reload', 'admin');</pre>


<h2>EXAMPLE
<a name="EXAMPLE"></a>
</h2>


<pre style="margin-left:11%; margin-top: 1em">  #!/usr/bin/perl
  use strict;
  use DBI();
  # Connect to the database.
  my $dbh = DBI&minus;&gt;connect(&quot;DBI:mysql:database=test;host=localhost&quot;,
                         &quot;joe&quot;, &quot;joe's password&quot;,
                         {'RaiseError' =&gt; 1});
  # Drop table 'foo'. This may fail, if 'foo' doesn't exist.
  # Thus we put an eval around it.
  eval { $dbh&minus;&gt;do(&quot;DROP TABLE foo&quot;) };
  print &quot;Dropping foo failed: $@\n&quot; if $@;
  # Create a new table 'foo'. This must not fail, thus we don't
  # catch errors.
  $dbh&minus;&gt;do(&quot;CREATE TABLE foo (id INTEGER, name VARCHAR(20))&quot;);
  # INSERT some data into 'foo'. We are using $dbh&minus;&gt;quote() for
  # quoting the name.
  $dbh&minus;&gt;do(&quot;INSERT INTO foo VALUES (1, &quot; . $dbh&minus;&gt;quote(&quot;Tim&quot;) . &quot;)&quot;);
  # Same thing, but using placeholders
  $dbh&minus;&gt;do(&quot;INSERT INTO foo VALUES (?, ?)&quot;, undef, 2, &quot;Jochen&quot;);
  # Now retrieve data from the table.
  my $sth = $dbh&minus;&gt;prepare(&quot;SELECT * FROM foo&quot;);
  $sth&minus;&gt;execute();
  while (my $ref = $sth&minus;&gt;fetchrow_hashref()) {
    print &quot;Found a row: id = $ref&minus;&gt;{'id'}, name = $ref&minus;&gt;{'name'}\n&quot;;
  }
  $sth&minus;&gt;finish();
  # Disconnect from the database.
  $dbh&minus;&gt;disconnect();</pre>


<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>DBD::mysql</b>
is the Perl5 Database Interface driver for the MySQL
database. In other words: DBD::mysql is an interface between
the Perl programming language and the MySQL programming
<small>API</small> that comes with the MySQL relational
database management system. Most functions provided by this
programming <small>API</small> are supported. Some rarely
used functions are missing, mainly because noone ever
requested them. :&minus;)</p>

<p style="margin-left:11%; margin-top: 1em">In what follows
we first discuss the use of DBD::mysql, because this is what
you will need the most. For installation, see the sections
on <small>INSTALLATION</small> , and &quot; <small>WIN32
INSTALLATION&quot;</small> below. See <small>EXAMPLE</small>
for a simple example above.</p>

<p style="margin-left:11%; margin-top: 1em">From perl you
activate the interface with the statement</p>

<pre style="margin-left:11%; margin-top: 1em">    use DBI;</pre>


<p style="margin-left:11%; margin-top: 1em">After that you
can connect to multiple MySQL database servers and send
multiple queries to any of them via a simple object oriented
interface. Two types of objects are available: database
handles and statement handles. Perl returns a database
handle to the connect method like so:</p>

<pre style="margin-left:11%; margin-top: 1em">  $dbh = DBI&minus;&gt;connect(&quot;DBI:mysql:database=$db;host=$host&quot;,
                      $user, $password, {RaiseError =&gt; 1});</pre>


<p style="margin-left:11%; margin-top: 1em">Once you have
connected to a database, you can can execute
<small>SQL</small> statements with:</p>

<pre style="margin-left:11%; margin-top: 1em">  my $query = sprintf(&quot;INSERT INTO foo VALUES (%d, %s)&quot;,
                      $number, $dbh&minus;&gt;quote(&quot;name&quot;));
  $dbh&minus;&gt;do($query);</pre>


<p style="margin-left:11%; margin-top: 1em">See
<i><small>DBI</small></i> (3) for details on the quote and
do methods. An alternative approach is</p>

<pre style="margin-left:11%; margin-top: 1em">  $dbh&minus;&gt;do(&quot;INSERT INTO foo VALUES (?, ?)&quot;, undef,
           $number, $name);</pre>


<p style="margin-left:11%; margin-top: 1em">in which case
the quote method is executed automatically. See also the
bind_param method in <i><small>DBI</small></i> (3). See
&quot; <small>DATABASE HANDLES&quot;</small> below for more
details on database handles.</p>

<p style="margin-left:11%; margin-top: 1em">If you want to
retrieve results, you need to create a so-called statement
handle with:</p>

<pre style="margin-left:11%; margin-top: 1em">  $sth = $dbh&minus;&gt;prepare(&quot;SELECT * FROM $table&quot;);
  $sth&minus;&gt;execute();</pre>


<p style="margin-left:11%; margin-top: 1em">This statement
handle can be used for multiple things. First of all you can
retreive a row of data:</p>

<pre style="margin-left:11%; margin-top: 1em">  my $row = $sth&minus;&gt;fetchrow_hashref();</pre>


<p style="margin-left:11%; margin-top: 1em">If your table
has columns <small>ID</small> and <small>NAME,</small> then
<tt>$row</tt> will be hash ref with keys <small>ID</small>
and <small>NAME.</small> See &quot; <small>STATEMENT
HANDLES&quot;</small> below for more details on statement
handles.</p>

<p style="margin-left:11%; margin-top: 1em">But now for a
more formal approach:</p>

<p style="margin-left:11%; margin-top: 1em"><b>Class
Methods <br>
connect</b></p>

<pre style="margin-left:17%;">    use DBI;
    $dsn = &quot;DBI:mysql:$database&quot;;
    $dsn = &quot;DBI:mysql:database=$database;host=$hostname&quot;;
    $dsn = &quot;DBI:mysql:database=$database;host=$hostname;port=$port&quot;;
    $dbh = DBI&minus;&gt;connect($dsn, $user, $password);</pre>


<p style="margin-left:17%; margin-top: 1em">A
<tt>&quot;database&quot;</tt> must always be specified. <br>
host <br>
port</p>

<p style="margin-left:23%;">The hostname, if not specified
or specified as &rsquo;&rsquo; or &rsquo;localhost&rsquo;,
will default to a MySQL server running on the local machine
using the default for the <small>UNIX</small> socket. To
connect to a MySQL server on the local machine via
<small>TCP,</small> you must specify the loopback
<small>IP</small> address (127.0.0.1) as the host.</p>

<p style="margin-left:23%; margin-top: 1em">Should the
MySQL server be running on a non-standard port number, you
may explicitly state the port number to connect to in the
<tt>&quot;hostname&quot;</tt> argument, by concatenating the
<i>hostname</i> and <i>port number</i> together separated by
a colon ( <tt>&quot;:&quot;</tt> ) character or by using the
<tt>&quot;port&quot;</tt> argument.</p>

<p style="margin-left:23%; margin-top: 1em">To connect to a
MySQL server on localhost using <small>TCP/IP,</small> you
must specify the hostname as 127.0.0.1 (with the optional
port).</p>

<p style="margin-left:17%;">mysql_client_found_rows</p>

<p style="margin-left:23%;">Enables ( <small>TRUE</small>
value) or disables ( <small>FALSE</small> value) the flag
<small>CLIENT_FOUND_ROWS</small> while connecting to the
MySQL server. This has a somewhat funny effect: Without
mysql_client_found_rows, if you perform a query like</p>

<pre style="margin-left:23%; margin-top: 1em">  UPDATE $table SET id = 1 WHERE id = 1</pre>


<p style="margin-left:23%; margin-top: 1em">then the MySQL
engine will always return 0, because no rows have changed.
With mysql_client_found_rows however, it will return the
number of rows that have an id 1, as some people are
expecting. (At least for compatibility to other
engines.)</p>

<p style="margin-left:17%;">mysql_compression</p>

<p style="margin-left:23%;">As of MySQL 3.22.3, a new
feature is supported: If your <small>DSN</small> contains
the option &quot;mysql_compression=1&quot;, then the
communication between client and server will be
compressed.</p>

<p style="margin-left:17%;">mysql_connect_timeout</p>

<p style="margin-left:23%;">If your <small>DSN</small>
contains the option &quot;mysql_connect_timeout=##&quot;,
the connect request to the server will timeout if it has not
been successful after the given number of seconds.</p>

<p style="margin-left:17%;">mysql_write_timeout</p>

<p style="margin-left:23%;">If your <small>DSN</small>
contains the option &quot;mysql_write_timeout=##&quot;, the
write operation to the server will timeout if it has not
been successful after the given number of seconds.</p>

<p style="margin-left:17%;">mysql_read_timeout</p>

<p style="margin-left:23%;">If your <small>DSN</small>
contains the option &quot;mysql_read_timeout=##&quot;, the
read operation to the server will timeout if it has not been
successful after the given number of seconds.</p>

<p style="margin-left:17%;">mysql_init_command</p>

<pre style="margin-left:23%;"> If your DSN contains the option &quot;mysql_init_command_timeout=##&quot;, then
 this SQL statement is executed when connecting to the MySQL server.
 It is automatically re&minus;executed if reconnection occurs.</pre>


<p style="margin-left:17%;">mysql_read_default_file <br>
mysql_read_default_group</p>

<p style="margin-left:23%;">These options can be used to
read a config file like /etc/my.cnf or ~/.my.cnf. By default
MySQL&rsquo;s C client library doesn&rsquo;t use any config
files unlike the client programs (mysql, mysqladmin, ...)
that do, but outside of the C client library. Thus you need
to explicitly request reading a config file, as in</p>

<pre style="margin-left:23%; margin-top: 1em">    $dsn = &quot;DBI:mysql:test;mysql_read_default_file=/home/joe/my.cnf&quot;;
    $dbh = DBI&minus;&gt;connect($dsn, $user, $password)</pre>


<p style="margin-left:23%; margin-top: 1em">The option
mysql_read_default_group can be used to specify the default
group in the config file: Usually this is the <i>client</i>
group, but see the following example:</p>

<pre style="margin-left:23%; margin-top: 1em">    [client]
    host=localhost
    [perl]
    host=perlhost</pre>


<p style="margin-left:23%; margin-top: 1em">(Note the order
of the entries! The example won&rsquo;t work, if you reverse
the [client] and [perl] sections!)</p>

<p style="margin-left:23%; margin-top: 1em">If you read
this config file, then you&rsquo;ll be typically connected
to <i>localhost</i>. However, by using</p>

<pre style="margin-left:23%; margin-top: 1em">    $dsn = &quot;DBI:mysql:test;mysql_read_default_group=perl;&quot;
        . &quot;mysql_read_default_file=/home/joe/my.cnf&quot;;
    $dbh = DBI&minus;&gt;connect($dsn, $user, $password);</pre>


<p style="margin-left:23%; margin-top: 1em">you&rsquo;ll be
connected to <i>perlhost</i>. Note that if you specify a
default group and do not specify a file, then the default
config files will all be read. See the documentation of the
C function <i>mysql_options()</i> for details.</p>

<p style="margin-left:17%;">mysql_socket</p>

<p style="margin-left:23%;">As of MySQL 3.21.15, it is
possible to choose the Unix socket that is used for
connecting to the server. This is done, for example,
with</p>

<pre style="margin-left:23%; margin-top: 1em">    mysql_socket=/dev/mysql</pre>


<p style="margin-left:23%; margin-top: 1em">Usually
there&rsquo;s no need for this option, unless you are using
another location for the socket than that built into the
client.</p>

<p style="margin-left:17%;">mysql_ssl</p>

<p style="margin-left:23%;">A true value turns on the
<small>CLIENT_SSL</small> flag when connecting to the MySQL
database:</p>

<pre style="margin-left:23%; margin-top: 1em">  mysql_ssl=1</pre>


<p style="margin-left:23%; margin-top: 1em">This means that
your communication with the server will be encrypted.</p>

<p style="margin-left:23%; margin-top: 1em">If you turn
mysql_ssl on, you might also wish to use the following
flags:</p>

<p style="margin-left:17%;">mysql_ssl_client_key <br>
mysql_ssl_client_cert <br>
mysql_ssl_ca_file <br>
mysql_ssl_ca_path <br>
mysql_ssl_cipher</p>

<p style="margin-left:23%;">These are used to specify the
respective parameters of a call to mysql_ssl_set, if
mysql_ssl is turned on.</p>

<p style="margin-left:17%;">mysql_local_infile</p>

<p style="margin-left:23%;">As of MySQL 3.23.49, the
<small>LOCAL</small> capability for <small>LOAD DATA</small>
may be disabled in the MySQL client library by default. If
your <small>DSN</small> contains the option
&quot;mysql_local_infile=1&quot;, <small>LOAD DATA
LOCAL</small> will be enabled. (However, this option is
*ineffective* if the server has also been configured to
disallow <small>LOCAL.</small> )</p>

<p style="margin-left:17%;">mysql_multi_statements</p>

<p style="margin-left:23%;">As of MySQL 4.1, support for
multiple statements seperated by a semicolon (;) may be
enabled by using this option. Enabling this option may cause
problems if server-side prepared statements are also
enabled.</p>

<p style="margin-left:17%;">Prepared statement support
(server side prepare)</p>

<p style="margin-left:23%;">As of 3.0002_1, server side
prepare statements were on by default (if your server was
&gt;= 4.1.3). As of 3.0009, they were off by default again
due to issues with the prepared statement <small>API</small>
(all other mysql connectors are set this way until C
<small>API</small> issues are resolved). The requirement to
use prepared statements still remains that you have a server
&gt;= 4.1.3</p>

<p style="margin-left:23%; margin-top: 1em">To use server
side prepared statements, all you need to do is set the
variable mysql_server_prepare in the connect:</p>

<p style="margin-left:23%; margin-top: 1em"><tt>$dbh</tt> =
<small>DBI&minus;</small> &gt;connect( <br>

&quot;DBI:mysql:database=test;host=localhost;mysql_server_prepare=1&quot;,
<br>
&quot;&quot;, <br>
&quot;&quot;, <br>
{ RaiseError =&gt; 1, AutoCommit =&gt; 1 } <br>
);</p>

<p style="margin-left:23%; margin-top: 1em">* Note:
delimiter for this param is &rsquo;;&rsquo;</p>

<p style="margin-left:23%; margin-top: 1em">There are many
benefits to using server side prepare statements, mostly if
you are performing many inserts because of that fact that a
single statement is prepared to accept multiple insert
values.</p>

<p style="margin-left:23%; margin-top: 1em">To make sure
that the &rsquo;make test&rsquo; step tests whether server
prepare works, you just need to export the env variable
<small>MYSQL_SERVER_PREPARE:</small></p>

<p style="margin-left:23%; margin-top: 1em">export
MYSQL_SERVER_PREPARE=1</p>

<p style="margin-left:17%;">mysql_embedded_options</p>

<p style="margin-left:23%;">The option
&lt;mysql_embedded_options&gt; can be used to pass
&rsquo;command&minus;line&rsquo; options to embedded
server.</p>

<p style="margin-left:23%; margin-top: 1em">Example:</p>

<p style="margin-left:23%; margin-top: 1em">use
<small>DBI</small> ;
<tt>$testdsn</tt>=&quot;DBI:mysqlEmb:database=test;mysql_embedded_options=&minus;&minus;help,&minus;&minus;verbose&quot;;
<tt>$dbh</tt> = <small>DBI&minus;</small>
&gt;connect($testdsn,&quot;a&quot;,&quot;b&quot;);</p>

<p style="margin-left:23%; margin-top: 1em">This would
cause the command line help to the embedded MySQL server
library to be printed.</p>

<p style="margin-left:17%;">mysql_embedded_groups</p>

<p style="margin-left:23%;">The option
&lt;mysql_embedded_groups&gt; can be used to specify the
groups in the config file(<i>my.cnf</i>) which will be used
to get options for embedded server. If not specified
[server] and [embedded] groups will be used.</p>

<p style="margin-left:23%; margin-top: 1em">Example:</p>


<p style="margin-left:23%; margin-top: 1em"><tt>$testdsn</tt>=&quot;DBI:mysqlEmb:database=test;mysql_embedded_groups=embedded_server,common&quot;;</p>

<p style="margin-left:11%; margin-top: 1em"><b>Private
MetaData Methods <br>
ListDBs</b></p>

<pre style="margin-left:17%;">    my $drh = DBI&minus;&gt;install_driver(&quot;mysql&quot;);
    @dbs = $drh&minus;&gt;func(&quot;$hostname:$port&quot;, '_ListDBs');
    @dbs = $drh&minus;&gt;func($hostname, $port, '_ListDBs');
    @dbs = $dbh&minus;&gt;func('_ListDBs');</pre>


<p style="margin-left:17%; margin-top: 1em">Returns a list
of all databases managed by the MySQL server running on
<tt>$hostname</tt>, port <tt>$port</tt>. This is a legacy
method. Instead, you should use the portable method</p>

<pre style="margin-left:17%; margin-top: 1em">    @dbs = DBI&minus;&gt;data_sources(&quot;mysql&quot;);</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Server
Administration</b> <br>
admin</p>

<pre style="margin-left:17%;">    $rc = $drh&minus;&gt;func(&quot;createdb&quot;, $dbname, [host, user, password,], 'admin');
    $rc = $drh&minus;&gt;func(&quot;dropdb&quot;, $dbname, [host, user, password,], 'admin');
    $rc = $drh&minus;&gt;func(&quot;shutdown&quot;, [host, user, password,], 'admin');
    $rc = $drh&minus;&gt;func(&quot;reload&quot;, [host, user, password,], 'admin');
      or
    $rc = $dbh&minus;&gt;func(&quot;createdb&quot;, $dbname, 'admin');
    $rc = $dbh&minus;&gt;func(&quot;dropdb&quot;, $dbname, 'admin');
    $rc = $dbh&minus;&gt;func(&quot;shutdown&quot;, 'admin');
    $rc = $dbh&minus;&gt;func(&quot;reload&quot;, 'admin');</pre>


<p style="margin-left:17%; margin-top: 1em">For server
administration you need a server connection. For obtaining
this connection you have two options: Either use a driver
handle (drh) and supply the appropriate arguments (host,
defaults localhost, user, defaults to &rsquo;&rsquo; and
password, defaults to &rsquo;&rsquo;). A driver handle can
be obtained with</p>

<pre style="margin-left:17%; margin-top: 1em">    $drh = DBI&minus;&gt;install_driver('mysql');</pre>


<p style="margin-left:17%; margin-top: 1em">Otherwise reuse
the existing connection of a database handle (dbh).</p>

<p style="margin-left:17%; margin-top: 1em">There&rsquo;s
only one function available for administrative purposes,
comparable to the m(y)sqladmin programs. The command being
execute depends on the first argument: <br>
createdb</p>

<p style="margin-left:23%;">Creates the database
<tt>$dbname</tt>. Equivalent to &quot;m(y)sqladmin create
<tt>$dbname</tt>&quot;.</p>

<p style="margin-left:17%;">dropdb</p>

<p style="margin-left:23%;">Drops the database
<tt>$dbname</tt>. Equivalent to &quot;m(y)sqladmin drop
<tt>$dbname</tt>&quot;.</p>

<p style="margin-left:23%; margin-top: 1em">It should be
noted that database deletion is <i>not prompted for</i> in
any way. Nor is it undo-able from <small>DBI.</small></p>

<pre style="margin-left:23%; margin-top: 1em">    Once you issue the dropDB() method, the database will be gone!</pre>


<p style="margin-left:23%; margin-top: 1em">These method
should be used at your own risk.</p>

<p style="margin-left:17%;">shutdown</p>

<p style="margin-left:23%;">Silently shuts down the
database engine. (Without prompting!) Equivalent to
&quot;m(y)sqladmin shutdown&quot;.</p>

<p style="margin-left:17%;">reload</p>

<p style="margin-left:23%;">Reloads the servers
configuration files and/or tables. This can be particularly
important if you modify access privileges or create new
users.</p>

<h2>DATABASE HANDLES
<a name="DATABASE HANDLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The DBD::mysql
driver supports the following attributes of database handles
(read only):</p>

<pre style="margin-left:11%; margin-top: 1em">  $errno = $dbh&minus;&gt;{'mysql_errno'};
  $error = $dbh&minus;&gt;{'mysql_error'};
  $info = $dbh&minus;&gt;{'mysql_hostinfo'};
  $info = $dbh&minus;&gt;{'mysql_info'};
  $insertid = $dbh&minus;&gt;{'mysql_insertid'};
  $info = $dbh&minus;&gt;{'mysql_protoinfo'};
  $info = $dbh&minus;&gt;{'mysql_serverinfo'};
  $info = $dbh&minus;&gt;{'mysql_stat'};
  $threadId = $dbh&minus;&gt;{'mysql_thread_id'};</pre>


<p style="margin-left:11%; margin-top: 1em">These
correspond to <i>mysql_errno()</i>, <i>mysql_error()</i>,
<i>mysql_get_host_info()</i>, <i>mysql_info()</i>,
<i>mysql_insert_id()</i>, <i>mysql_get_proto_info()</i>,
<i>mysql_get_server_info()</i>, <i>mysql_stat()</i> and
<i>mysql_thread_id()</i>, respectively.</p>

<pre style="margin-left:11%; margin-top: 1em"> $info_hashref = $dhb&minus;&gt;{mysql_dbd_stats}</pre>


<p style="margin-left:11%; margin-top: 1em">DBD::mysql
keeps track of some statistics in the mysql_dbd_stats
attribute. The following stats are being maintained: <br>
auto_reconnects_ok</p>

<p style="margin-left:17%;">The number of times that
DBD::mysql successfully reconnected to the mysql server.</p>

<p style="margin-left:11%;">auto_reconnects_failed</p>

<p style="margin-left:17%;">The number of times that
DBD::mysql tried to reconnect to mysql but failed.</p>

<p style="margin-left:11%; margin-top: 1em">The DBD::mysql
driver also supports the following attribute(s) of database
handles (read/write):</p>

<pre style="margin-left:11%; margin-top: 1em"> $bool_value = $dbh&minus;&gt;{mysql_auto_reconnect};
 $dbh&minus;&gt;{mysql_auto_reconnect} = $AutoReconnect ? 1 : 0;</pre>


<p style="margin-left:11%;">mysql_auto_reconnect</p>

<p style="margin-left:17%;">This attribute determines
whether DBD::mysql will automatically reconnect to mysql if
the connection be lost. This feature defaults to off;
however, if either the <small>GATEWAY_INTERFACE</small> or
<small>MOD_PERL</small> envionment variable is set,
DBD::mysql will turn mysql_auto_reconnect on. Setting
mysql_auto_reconnect to on is not advised if &rsquo;lock
tables&rsquo; is used because if DBD::mysql reconnect to
mysql all table locks will be lost. This attribute is
ignored when AutoCommit is turned off, and when AutoCommit
is turned off, DBD::mysql will not automatically reconnect
to the server.</p>

<p style="margin-left:17%; margin-top: 1em">It is also
possible to set the default value of the
<tt>&quot;mysql_auto_reconnect&quot;</tt> attribute for the
<tt>$dbh</tt> by passing it in the
<tt>&quot;\%attr&quot;</tt> hash for
<tt>&quot;DBI&minus;&quot;</tt>connect&gt;.</p>

<p style="margin-left:17%; margin-top: 1em">Note that if
you are using a module or framework that performs
reconnections for you (for example DBIx::Connector in fixup
mode), this value must be set to 0.</p>

<p style="margin-left:11%;">mysql_use_result</p>

<p style="margin-left:17%;">This attribute forces the
driver to use mysql_use_result rather than
mysql_store_result. The former is faster and less memory
consuming, but tends to block other processes. (That&rsquo;s
why mysql_store_result is the default.)</p>

<p style="margin-left:17%; margin-top: 1em">It is possible
to set the default value of the
<tt>&quot;mysql_use_result&quot;</tt> attribute for the
<tt>$dbh</tt> using several ways:</p>

<pre style="margin-left:17%; margin-top: 1em"> &minus; through DSN
   $dbh= DBI&minus;&gt;connect(&quot;DBI:mysql:test;mysql_use_result=1&quot;, &quot;root&quot;, &quot;&quot;);
 &minus; after creation of database handle
   $dbh&minus;&gt;{'mysql_use_result'}=0; #disable
   $dbh&minus;&gt;{'mysql_use_result'}=1; #enable</pre>


<p style="margin-left:17%; margin-top: 1em">It is possible
to set/unset the <tt>&quot;mysql_use_result&quot;</tt>
attribute after creation of the statement handle. See
below.</p>

<p style="margin-left:11%;">mysql_enable_utf8</p>

<p style="margin-left:17%;">This attribute determines
whether DBD::mysql should assume strings stored in the
database are utf8. This feature defaults to off.</p>

<p style="margin-left:17%; margin-top: 1em">When set, a
data retrieved from a textual column type (char, varchar,
etc) will have the <small>UTF&minus;8</small> flag turned on
if necessary. This enables character semantics on that
string. You will also need to ensure that your database /
table / column is configured to use <small>UTF8.</small> See
Chapter 10 of the mysql manual for details.</p>

<p style="margin-left:17%; margin-top: 1em">Additionally,
turning on this flag tells MySQL that incoming data should
be treated as <small>UTF&minus;8.</small> This will only
take effect if used as part of the call to <i>connect()</i>.
If you turn the flag on after connecting, you will need to
issue the command <tt>&quot;SET NAMES utf8&quot;</tt> to get
the same effect.</p>

<p style="margin-left:17%; margin-top: 1em">This option is
experimental and may change in future versions.</p>

<p style="margin-left:11%;">mysql_bind_type_guessing</p>

<p style="margin-left:17%;">This attribute causes the
driver (emulated prepare statements) to attempt to guess if
a value being bound is a numeric value, and if so,
doesn&rsquo;t quote the value. This was created by
Dragonchild and is one way to deal with the performance
issue of using quotes in a statement that is inserting or
updating a large numeric value. This was previously called
<tt>&quot;unsafe_bind_type_guessing&quot;</tt> because it is
experimental. I have successfully run the full test suite
with this option turned on, the name can now be simply
<tt>&quot;mysql_bind_type_guessing&quot;</tt>.</p>


<p style="margin-left:17%; margin-top: 1em"><small>CAVEAT:</small>
Even though you can insert an integer value into a character
column, if this column is indexed, if you query that column
with the integer value not being quoted, it will not use the
index:</p>

<p style="margin-left:17%; margin-top: 1em">MariaDB
[test]&gt; explain select * from test where value0 =
&rsquo;3&rsquo; \G *************************** 1. row
*************************** <br>
id: 1 <br>
select_type: <small>SIMPLE</small> <br>
table: test <br>
type: ref possible_keys: value0 <br>
key: value0 <br>
key_len: 13 <br>
ref: const <br>
rows: 1 <br>
Extra: Using index condition 1 row in set (0.00 sec)</p>

<p style="margin-left:17%; margin-top: 1em">MariaDB
[test]&gt; explain select * from test where value0 = 3 <br>
&minus;&gt; \G *************************** 1. row
*************************** <br>
id: 1 <br>
select_type: <small>SIMPLE</small> <br>
table: test <br>
type: <small>ALL</small> possible_keys: value0 <br>
key: <small>NULL</small> <br>
key_len: <small>NULL</small> <br>
ref: <small>NULL</small> <br>
rows: 6 <br>
Extra: Using where 1 row in set (0.00 sec)</p>

<p style="margin-left:17%; margin-top: 1em">See bug:
https://rt.cpan.org/Ticket/Display.html?id=43822</p>


<p style="margin-left:17%; margin-top: 1em"><tt>&quot;mysql_bind_type_guessing&quot;</tt>
can be turned on via</p>

<pre style="margin-left:17%; margin-top: 1em"> &minus; through DSN
  my $dbh= DBI&minus;&gt;connect('DBI:mysql:test', 'username', 'pass',
  { mysql_bind_type_guessing =&gt; 1})
  &minus; OR after handle creation
  $dbh&minus;&gt;{mysql_bind_type_guessing} = 1;</pre>



<p style="margin-left:11%;">mysql_bind_comment_placeholders</p>

<p style="margin-left:17%;">This attribute causes the
driver (emulated prepare statements) will cause any
placeholders in comments to be bound. This is not correct
prepared statement behavior, but some developers have come
to depend on this behavior, so I have made it available in
4.015</p>

<p style="margin-left:11%;">mysql_no_autocommit_cmd</p>

<p style="margin-left:17%;">This attribute causes the
driver to not issue &rsquo;set autocommit&rsquo; either
through explicit or using <i>mysql_autocommit()</i>. This is
particularly useful in the case of using MySQL Proxy.</p>

<p style="margin-left:17%; margin-top: 1em">See the bug
report:</p>


<p style="margin-left:17%; margin-top: 1em">https://rt.cpan.org/Public/Bug/Display.html?id=46308</p>


<p style="margin-left:17%; margin-top: 1em"><tt>&quot;mysql_no_autocommit_cmd&quot;</tt>
can be turned on via</p>

<pre style="margin-left:17%; margin-top: 1em"> &minus; through DSN
  my $dbh= DBI&minus;&gt;connect('DBI:mysql:test', 'username', 'pass',
  { mysql_no_autocommit_cmd =&gt; 1})
  &minus; OR after handle creation
  $dbh&minus;&gt;{mysql_no_autocommit_cmd} = 1;</pre>


<h2>STATEMENT HANDLES
<a name="STATEMENT HANDLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The statement
handles of DBD::mysql support a number of attributes. You
access these by using, for example,</p>

<pre style="margin-left:11%; margin-top: 1em">  my $numFields = $sth&minus;&gt;{'NUM_OF_FIELDS'};</pre>


<p style="margin-left:11%; margin-top: 1em">Note, that most
attributes are valid only after a successfull
<i>execute</i>. An <tt>&quot;undef&quot;</tt> value will
returned in that case. The most important exception is the
<tt>&quot;mysql_use_result&quot;</tt> attribute: This forces
the driver to use mysql_use_result rather than
mysql_store_result. The former is faster and less memory
consuming, but tends to block other processes. (That&rsquo;s
why mysql_store_result is the default.)</p>

<p style="margin-left:11%; margin-top: 1em">To set the
<tt>&quot;mysql_use_result&quot;</tt> attribute, use either
of the following:</p>

<pre style="margin-left:11%; margin-top: 1em">  my $sth = $dbh&minus;&gt;prepare(&quot;QUERY&quot;, { &quot;mysql_use_result&quot; =&gt; 1});</pre>


<p style="margin-left:11%; margin-top: 1em">or</p>

<pre style="margin-left:11%; margin-top: 1em">  my $sth = $dbh&minus;&gt;prepare(&quot;QUERY&quot;);
  $sth&minus;&gt;{&quot;mysql_use_result&quot;} = 1;</pre>


<p style="margin-left:11%; margin-top: 1em">Column
dependent attributes, for example <i><small>NAME</small></i>
, the column names, are returned as a reference to an array.
The array indices are corresponding to the indices of the
arrays returned by <i>fetchrow</i> and similar methods. For
example the following code will print a header of table
names together with all rows:</p>

<pre style="margin-left:11%; margin-top: 1em">  my $sth = $dbh&minus;&gt;prepare(&quot;SELECT * FROM $table&quot;);
  if (!$sth) {
      die &quot;Error:&quot; . $dbh&minus;&gt;errstr . &quot;\n&quot;;
  }
  if (!$sth&minus;&gt;execute) {
      die &quot;Error:&quot; . $sth&minus;&gt;errstr . &quot;\n&quot;;
  }
  my $names = $sth&minus;&gt;{'NAME'};
  my $numFields = $sth&minus;&gt;{'NUM_OF_FIELDS'};
  for (my $i = 0;  $i &lt; $numFields;  $i++) {
      printf(&quot;%s%s&quot;, $i ? &quot;,&quot; : &quot;&quot;, $$names[$i]);
  }
  print &quot;\n&quot;;
  while (my $ref = $sth&minus;&gt;fetchrow_arrayref) {
      for (my $i = 0;  $i &lt; $numFields;  $i++) {
          printf(&quot;%s%s&quot;, $i ? &quot;,&quot; : &quot;&quot;, $$ref[$i]);
      }
      print &quot;\n&quot;;
  }</pre>


<p style="margin-left:11%; margin-top: 1em">For portable
applications you should restrict yourself to attributes with
capitalized or mixed case names. Lower case attribute names
are private to DBD::mysql. The attribute list includes: <br>
ChopBlanks</p>

<p style="margin-left:17%;">this attribute determines
whether a <i>fetchrow</i> will chop preceding and trailing
blanks off the column values. Chopping blanks does not have
impact on the <i>max_length</i> attribute.</p>

<p style="margin-left:11%;">mysql_insertid</p>

<p style="margin-left:17%;">MySQL has the ability to choose
unique key values automatically. If this happened, the new
<small>ID</small> will be stored in this attribute. An
alternative way for accessing this attribute is via
<tt>$dbh</tt>&minus;&gt;{&rsquo;mysql_insertid&rsquo;}.
(Note we are using the <tt>$dbh</tt> in this case!)</p>

<p style="margin-left:11%;">mysql_is_blob</p>

<p style="margin-left:17%;">Reference to an array of
boolean values; <small>TRUE</small> indicates, that the
respective column is a blob. This attribute is valid for
MySQL only.</p>

<p style="margin-left:11%;">mysql_is_key</p>

<p style="margin-left:17%;">Reference to an array of
boolean values; <small>TRUE</small> indicates, that the
respective column is a key. This is valid for MySQL
only.</p>

<p style="margin-left:11%;">mysql_is_num</p>

<p style="margin-left:17%;">Reference to an array of
boolean values; <small>TRUE</small> indicates, that the
respective column contains numeric values.</p>

<p style="margin-left:11%;">mysql_is_pri_key</p>

<p style="margin-left:17%;">Reference to an array of
boolean values; <small>TRUE</small> indicates, that the
respective column is a primary key.</p>

<p style="margin-left:11%;">mysql_is_auto_increment</p>

<p style="margin-left:17%;">Reference to an array of
boolean values; <small>TRUE</small> indicates that the
respective column is an <small>AUTO_INCREMENT</small>
column. This is only valid for MySQL.</p>

<p style="margin-left:11%;">mysql_length <br>
mysql_max_length</p>

<p style="margin-left:17%;">A reference to an array of
maximum column sizes. The <i>max_length</i> is the maximum
physically present in the result table, <i>length</i> gives
the theoretically possible maximum. <i>max_length</i> is
valid for MySQL only.</p>

<p style="margin-left:11%;">mysql_clientinfo</p>

<p style="margin-left:17%;">List information of the MySQL
client library that DBD::mysql was built against:</p>

<p style="margin-left:17%; margin-top: 1em">print
&quot;$dbh&minus;&gt;{mysql_clientinfo}\n&quot;;</p>


<p style="margin-left:17%; margin-top: 1em">5.2.0&minus;MariaDB</p>

<p style="margin-left:11%;">mysql_clientversion</p>

<p style="margin-left:17%;">print
&quot;$dbh&minus;&gt;{mysql_clientversion}\n&quot;;</p>

<p style="margin-left:17%; margin-top: 1em">50200</p>

<p style="margin-left:11%;">mysql_serverversion</p>

<p style="margin-left:17%;">print
&quot;$dbh&minus;&gt;{mysql_serverversion}\n&quot;;</p>

<p style="margin-left:17%; margin-top: 1em">50200</p>

<p style="margin-left:11%;"><small>NAME</small></p>

<p style="margin-left:17%;">A reference to an array of
column names.</p>

<p style="margin-left:11%;"><small>NULLABLE</small></p>

<p style="margin-left:17%;">A reference to an array of
boolean values; <small>TRUE</small> indicates that this
column may contain <small>NULL</small> &rsquo;s.</p>


<p style="margin-left:11%;"><small>NUM_OF_FIELDS</small></p>

<p style="margin-left:17%;">Number of fields returned by a
<i><small>SELECT</small></i> or
<i><small>LISTFIELDS</small></i> statement. You may use this
for checking whether a statement returned a result: A zero
value indicates a non-SELECT statement like
<i><small>INSERT</small></i> , <i><small>DELETE</small></i>
or <i><small>UPDATE</small></i> .</p>

<p style="margin-left:11%;">mysql_table</p>

<p style="margin-left:17%;">A reference to an array of
table names, useful in a <i><small>JOIN</small></i>
result.</p>

<p style="margin-left:11%;"><small>TYPE</small></p>

<p style="margin-left:17%;">A reference to an array of
column types. The engine&rsquo;s native column types are
mapped to portable types like
<i><small>DBI::SQL_INTEGER</small> ()</i> or
<i><small>DBI::SQL_VARCHAR</small> ()</i>, as good as
possible. Not all native types have a meaningfull
equivalent, for example DBD::mysql::FIELD_TYPE_INTERVAL is
mapped to <i><small>DBI::SQL_VARCHAR</small> ()</i>. If you
need the native column types, use <i>mysql_type</i>. See
below.</p>

<p style="margin-left:11%;">mysql_type</p>

<p style="margin-left:17%;">A reference to an array of
MySQL&rsquo;s native column types, for example
<i>DBD::mysql::FIELD_TYPE_SHORT()</i> or
<i>DBD::mysql::FIELD_TYPE_STRING()</i>. Use the
<i><small>TYPE</small></i> attribute, if you want portable
types like <i><small>DBI::SQL_SMALLINT</small> ()</i> or
<i><small>DBI::SQL_VARCHAR</small> ()</i>.</p>

<p style="margin-left:11%;">mysql_type_name</p>

<p style="margin-left:17%;">Similar to mysql, but type
names and not numbers are returned. Whenever possible, the
<small>ANSI SQL</small> name is preferred.</p>

<p style="margin-left:11%;">mysql_warning_count</p>

<p style="margin-left:17%;">The number of warnings
generated during execution of the <small>SQL</small>
statement.</p>

<h2>TRANSACTION SUPPORT
<a name="TRANSACTION SUPPORT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Beginning with
DBD::mysql 2.0416, transactions are supported. The
transaction support works as follows:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>By default AutoCommit mode is on, following the
<small>DBI</small> specifications.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>If you execute</p></td></tr>
</table>

<pre style="margin-left:17%; margin-top: 1em">    $dbh&minus;&gt;{'AutoCommit'} = 0;</pre>


<p style="margin-left:17%; margin-top: 1em">or</p>

<pre style="margin-left:17%; margin-top: 1em">    $dbh&minus;&gt;{'AutoCommit'} = 1;</pre>


<p style="margin-left:17%; margin-top: 1em">then the driver
will set the MySQL server variable autocommit to 0 or 1,
respectively. Switching from 0 to 1 will also issue a
<small>COMMIT,</small> following the <small>DBI</small>
specifications.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="17%">


<p style="margin-top: 1em">The methods</p></td>
<td width="66%">
</td></tr>
</table>

<pre style="margin-left:17%; margin-top: 1em">    $dbh&minus;&gt;rollback();
    $dbh&minus;&gt;commit();</pre>


<p style="margin-left:17%; margin-top: 1em">will issue the
commands <small>COMMIT</small> and <small>ROLLBACK,</small>
respectively. A <small>ROLLBACK</small> will also be issued
if AutoCommit mode is off and the database handles
<small>DESTROY</small> method is called. Again, this is
following the <small>DBI</small> specifications.</p>

<p style="margin-left:11%; margin-top: 1em">Given the
above, you should note the following:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">You should never change the
server variable autocommit manually, unless you are ignoring
<small>DBI</small> &rsquo;s transaction support.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Switching AutoCommit mode from on to off or vice versa
may fail. You should always check for errors, when changing
AutoCommit mode. The suggested way of doing so is using the
<small>DBI</small> flag RaiseError. If you don&rsquo;t like
RaiseError, you have to use code like the following:</p></td></tr>
</table>

<pre style="margin-left:17%; margin-top: 1em">  $dbh&minus;&gt;{'AutoCommit'} = 0;
  if ($dbh&minus;&gt;{'AutoCommit'}) {
    # An error occurred!
  }</pre>



<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">If you detect an error while
changing the AutoCommit mode, you should no longer use the
database handle. In other words, you should disconnect and
reconnect again, because the transaction mode is
unpredictable. Alternatively you may verify the transaction
mode by checking the value of the server variable
autocommit. However, such behaviour isn&rsquo;t
portable.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>DBD::mysql has a &quot;reconnect&quot; feature that
handles the so-called MySQL &quot;morning bug&quot;: If the
server has disconnected, most probably due to a timeout,
then by default the driver will reconnect and attempt to
execute the same <small>SQL</small> statement again.
However, this behaviour is disabled when AutoCommit is off:
Otherwise the transaction state would be completely
unpredictable after a reconnect.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The &quot;reconnect&quot; feature of DBD::mysql can be
toggled by using the mysql_auto_reconnect attribute. This
behaviour should be turned off in code that uses <small>LOCK
TABLE</small> because if the database server time out and
DBD::mysql reconnect, table locks will be lost without any
indication of such loss.</p></td></tr>
</table>

<h2>MULTIPLE RESULT SETS
<a name="MULTIPLE RESULT SETS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">As of version
3.0002_5, DBD::mysql supports multiple result sets (Thanks
to Guy Harrison!). This is the first release of this
functionality, so there may be issues. Please report bugs if
you run into them!</p>

<p style="margin-left:11%; margin-top: 1em">The basic usage
of multiple result sets is</p>

<pre style="margin-left:11%; margin-top: 1em">  do
  {
    while (@row= $sth&minus;&gt;fetchrow_array())
    {
      do stuff;
    }
  } while ($sth&minus;&gt;more_results)</pre>


<p style="margin-left:11%; margin-top: 1em">An example
would be:</p>

<pre style="margin-left:11%; margin-top: 1em">  $dbh&minus;&gt;do(&quot;drop procedure if exists someproc&quot;) or print $DBI::errstr;
  $dbh&minus;&gt;do(&quot;create procedure somproc() deterministic
   begin
   declare a,b,c,d int;
   set a=1;
   set b=2;
   set c=3;
   set d=4;
   select a, b, c, d;
   select d, c, b, a;
   select b, a, c, d;
   select c, b, d, a;
  end&quot;) or print $DBI::errstr;
  $sth=$dbh&minus;&gt;prepare('call someproc()') ||
  die $DBI::err.&quot;: &quot;.$DBI::errstr;
  $sth&minus;&gt;execute || die DBI::err.&quot;: &quot;.$DBI::errstr; $rowset=0;
  do {
    print &quot;\nRowset &quot;.++$i.&quot;\n&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;\n\n&quot;;
    foreach $colno (0..$sth&minus;&gt;{NUM_OF_FIELDS}) {
      print $sth&minus;&gt;{NAME}&minus;&gt;[$colno].&quot;\t&quot;;
    }
    print &quot;\n&quot;;
    while (@row= $sth&minus;&gt;fetchrow_array())  {
      foreach $field (0..$#row) {
        print $row[$field].&quot;\t&quot;;
      }
      print &quot;\n&quot;;
    }
  } until (!$sth&minus;&gt;more_results)</pre>


<p style="margin-left:11%; margin-top: 1em">For more
examples, please see the eg/ directory. This is where
helpful DBD::mysql code snippits will be added in the
future.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Issues with
Multiple result sets</b> <br>
So far, the main issue is if your result sets are
&quot;jagged&quot;, meaning, the number of columns of your
results vary. Varying numbers of columns could result in
your script crashing. This is something that will be fixed
soon.</p>

<h2>MULTITHREADING
<a name="MULTITHREADING"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
multithreading capabilities of DBD::mysql depend completely
on the underlying C libraries: The modules are working with
handle data only, no global variables are accessed or (to
the best of my knowledge) thread unsafe functions are
called. Thus DBD::mysql is believed to be completely thread
safe, if the C libraries are thread safe and you don&rsquo;t
share handles among threads.</p>

<p style="margin-left:11%; margin-top: 1em">The obvious
question is: Are the C libraries thread safe? In the case of
MySQL the answer is &quot;mostly&quot; and, in theory, you
should be able to get a &quot;yes&quot;, if the C library is
compiled for being thread safe (By default it isn&rsquo;t.)
by passing the option
&minus;with&minus;thread&minus;safe&minus;client to
configure. See the section on <i>How to make a threadsafe
client</i> in the manual.</p>

<h2>ASYNCHRONOUS QUERIES
<a name="ASYNCHRONOUS QUERIES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">You can make a
single asynchronous query per MySQL connection; this allows
you to submit a long-running query to the server and have an
event loop inform you when it&rsquo;s ready. An asynchronous
query is started by either setting the &rsquo;async&rsquo;
attribute to a truthy value in the &quot;do&quot; in
<small>DBI</small> method, or in the &quot;prepare&quot; in
<small>DBI</small> method. Statements created with
&rsquo;async&rsquo; set to true in prepare always run their
queries asynchronously when &quot;execute&quot; in
<small>DBI</small> is called. The driver also offers three
additional methods: <tt>&quot;mysql_async_result&quot;</tt>,
<tt>&quot;mysql_async_ready&quot;</tt>, and
<tt>&quot;mysql_fd&quot;</tt>.
<tt>&quot;mysql_async_result&quot;</tt> returns what do or
execute would have; that is, the number of rows affected.
<tt>&quot;mysql_async_ready&quot;</tt> returns true if
<tt>&quot;mysql_async_result&quot;</tt> will not block, and
zero otherwise. They both return <tt>&quot;undef&quot;</tt>
if that handle is not currently running an asynchronous
query. <tt>&quot;mysql_fd&quot;</tt> returns the file
descriptor number for the MySQL connection; you can use this
in an event loop.</p>

<p style="margin-left:11%; margin-top: 1em">Here&rsquo;s an
example of how to use the asynchronous query interface:</p>

<pre style="margin-left:11%; margin-top: 1em">  use feature 'say';
  $dbh&minus;&gt;do('SELECT SLEEP(10)', { async =&gt; 1 });
  until($dbh&minus;&gt;mysql_async_ready) {
    say 'not ready yet!';
    sleep 1;
  }
  my $rows = $dbh&minus;&gt;mysql_async_result;</pre>


<h2>INSTALLATION
<a name="INSTALLATION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Windows users
may skip this section and pass over to <small>WIN32
INSTALLATION</small> below. Others, go on reading.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Environment
Variables</b> <br>
For ease of use, you can now set environment variables for
DBD::mysql installation. You can set any or all of the
options, and export them by putting them in your .bashrc or
the like:</p>

<pre style="margin-left:11%; margin-top: 1em">    export DBD_MYSQL_CFLAGS=&minus;I/usr/local/mysql/include/mysql
    export DBD_MYSQL_LIBS=&quot;&minus;L/usr/local/mysql/lib/mysql &minus;lmysqlclient&quot;
    export DBD_MYSQL_EMBEDDED=
    export DBD_MYSQL_CONFIG=mysql_config
    export DBD_MYSQL_NOCATCHSTDERR=0
    export DBD_MYSQL_NOFOUNDROWS=0
    export DBD_MYSQL_SSL=
    export DBD_MYSQL_TESTDB=test
    export DBD_MYSQL_TESTHOST=localhost
    export DBD_MYSQL_TESTPASSWORD=s3kr1+
    export DBD_MYSQL_TESTPORT=3306
    export DBD_MYSQL_TESTUSER=me</pre>


<p style="margin-left:11%; margin-top: 1em">The most useful
may be the host, database, port, socket, user, and
password.</p>

<p style="margin-left:11%; margin-top: 1em">Installation
will first look to your mysql_config, and then your
environment variables, and then it will guess with
intelligent defaults.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Installing
with <small>CPAN</small></b> <br>
First of all, you do not need an installed MySQL server for
installing DBD::mysql. However, you need at least the client
libraries and possibly the header files, if you are
compiling DBD::mysql from source. In the case of MySQL you
can create a client-only version by using the configure
option &minus;&minus;without&minus;server. If you are using
precompiled binaries, then it may be possible to use just
selected <small>RPM</small> &rsquo;s like MySQL-client and
MySQL-devel or something similar, depending on the
distribution.</p>

<p style="margin-left:11%; margin-top: 1em">First you need
to install the <small>DBI</small> module. For using
<i>dbimon</i>, a simple <small>DBI</small> shell it is
recommended to install Data::ShowTable another Perl
module.</p>

<p style="margin-left:11%; margin-top: 1em">I recommend
trying automatic installation via the <small>CPAN</small>
module. Try</p>

<pre style="margin-left:11%; margin-top: 1em">  perl &minus;MCPAN &minus;e shell</pre>


<p style="margin-left:11%; margin-top: 1em">If you are
using the <small>CPAN</small> module for the first time, it
will prompt you a lot of questions. If you finally receive
the <small>CPAN</small> prompt, enter</p>

<pre style="margin-left:11%; margin-top: 1em">  install Bundle::DBD::mysql</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Manual
Installation</b> <br>
If this fails (which may be the case for a number of
reasons, for example because you are behind a firewall or
don&rsquo;t have network access), you need to do a manual
installation. First of all you need to fetch the modules
from <small>CPAN</small> search</p>

<pre style="margin-left:11%; margin-top: 1em">   http://search.cpan.org/</pre>


<p style="margin-left:11%; margin-top: 1em">The following
modules are required</p>

<pre style="margin-left:11%; margin-top: 1em">  DBI
  Data::ShowTable
  DBD::mysql</pre>


<p style="margin-left:11%; margin-top: 1em">Then enter the
following commands (note &minus; versions are just
examples):</p>

<pre style="margin-left:11%; margin-top: 1em">  gzip &minus;cd DBI&minus;(version).tar.gz | tar xf &minus;
  cd DBI&minus;(version)
  perl Makefile.PL
  make
  make test
  make install
  cd ..
  gzip &minus;cd Data&minus;ShowTable&minus;(version).tar.gz | tar xf &minus;
  cd Data&minus;ShowTable&minus;3.3
  perl Makefile.PL
  make
  make install
  cd ..
  gzip &minus;cd DBD&minus;mysql&minus;(version)&minus;tar.gz | tar xf &minus;
  cd DBD&minus;mysql&minus;(version)
  perl Makefile.PL
  make
  make test
  make install</pre>


<p style="margin-left:11%; margin-top: 1em">During
&quot;perl Makefile.PL&quot; you will be prompted some
questions. Other questions are the directories with header
files and libraries. For example, of your file
<i>mysql.h</i> is in <i>/usr/include/mysql/mysql.h</i>, then
enter the header directory <i>/usr</i>, likewise for
<i>/usr/lib/mysql/libmysqlclient.a</i> or
<i>/usr/lib/libmysqlclient.so</i>.</p>

<h2>WIN32 INSTALLATION
<a name="WIN32 INSTALLATION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">If you are
using ActivePerl, you may use ppm to install DBD-mysql. For
Perl 5.6, upgrade to Build 623 or later, then it is
sufficient to run</p>

<pre style="margin-left:11%; margin-top: 1em">  ppm install DBI
  ppm install DBD::mysql</pre>


<p style="margin-left:11%; margin-top: 1em">If you need an
<small>HTTP</small> proxy, you might need to set the
environment variable http_proxy, for example like this:</p>

<pre style="margin-left:11%; margin-top: 1em">  set http_proxy=http://myproxy.com:8080/</pre>


<p style="margin-left:11%; margin-top: 1em">As of this
writing, DBD::mysql is missing in the ActivePerl 5.8.0
repository. However, Randy Kobes has kindly donated an own
distribution and the following might succeed:</p>

<pre style="margin-left:11%; margin-top: 1em">  ppm install http://theoryx5.uwinnipeg.ca/ppms/DBD&minus;mysql.ppd</pre>


<p style="margin-left:11%; margin-top: 1em">Otherwise you
definitely *need* a C compiler. And it *must* be the same
compiler that was being used for compiling Perl itself. If
you don&rsquo;t have a C compiler, the file
<small>README</small> .win32 from the Perl source
distribution tells you where to obtain freely distributable
C compilers like egcs or gcc. The Perl sources are available
via <small>CPAN</small> search</p>

<pre style="margin-left:11%; margin-top: 1em">  http://search.cpan.org</pre>


<p style="margin-left:11%; margin-top: 1em">I recommend
using the win32clients package for installing DBD::mysql
under Win32, available for download on www.tcx.se. The
following steps have been required for me:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&minus;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">The current Perl versions (5.6,
as of this writing) do have a problem with detecting the C
libraries. I recommend to apply the following patch:</p></td></tr>
</table>

<pre style="margin-left:17%; margin-top: 1em">  *** c:\Perl\lib\ExtUtils\Liblist.pm.orig Sat Apr 15 20:03:40 2000
  &minus;&minus;&minus; c:\Perl\lib\ExtUtils\Liblist.pm      Sat Apr 15 20:03:45 2000
  ***************
  *** 230,235 ****
  &minus;&minus;&minus; 230,239 &minus;&minus;&minus;&minus;
      # add &quot;$Config{installarchlib}/CORE&quot; to default search path
      push @libpath, &quot;$Config{installarchlib}/CORE&quot;;
  +     if ($VC  and  exists($ENV{LIB})  and  defined($ENV{LIB})) {
  +       push(@libpath, split(/;/, $ENV{LIB}));
  +     }
  +
      foreach (Text::ParseWords::quotewords('\s+', 0, $potential_libs)){
        $thislib = $_;</pre>



<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&minus;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Extract sources into <i>C:\</i>.
This will create a directory <i>C:\mysql</i> with
subdirectories include and lib.</p></td></tr>
</table>


<p style="margin-left:17%; margin-top: 1em"><small>IMPORTANT:</small>
Make sure this subdirectory is not shared by other
<small>TCX</small> files! In particular do *not* store the
MySQL server in the same directory. If the server is already
installed in <i>C:\mysql</i>, choose a location like
<i>C:\tmp</i>, extract the win32clients there. Note that you
can remove this directory entirely once you have installed
DBD::mysql.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&minus;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Extract the DBD::mysql sources
into another directory, for example
<i>C:\src\siteperl</i></p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&minus;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Open a <small>DOS</small> shell and change directory to
<i>C:\src\siteperl</i>.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&minus;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The next step is only required if you repeat building
the modules: Make sure that you have a clean build tree by
running</p> </td></tr>
</table>

<pre style="margin-left:17%; margin-top: 1em">  nmake realclean</pre>


<p style="margin-left:17%; margin-top: 1em">If you
don&rsquo;t have <small>VC++,</small> replace nmake with
your flavour of make. If error messages are reported in this
step, you may safely ignore them.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&minus;</p></td>
<td width="5%"></td>
<td width="5%">


<p style="margin-top: 1em">Run</p></td>
<td width="78%">
</td></tr>
</table>

<pre style="margin-left:17%; margin-top: 1em">  perl Makefile.PL</pre>


<p style="margin-left:17%; margin-top: 1em">which will
prompt you for some settings. The really important ones
are:</p>

<pre style="margin-left:17%; margin-top: 1em">  Which DBMS do you want to use?</pre>


<p style="margin-left:17%; margin-top: 1em">enter a 1 here
(MySQL only), and</p>

<pre style="margin-left:17%; margin-top: 1em">  Where is your mysql installed? Please tell me the directory that
  contains the subdir include.</pre>


<p style="margin-left:17%; margin-top: 1em">where you have
to enter the win32clients directory, for example
<i>C:\mysql</i> or <i>C:\tmp\mysql</i>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&minus;</p></td>
<td width="5%"></td>
<td width="41%">


<p style="margin-top: 1em">Continued in the usual way:</p></td>
<td width="42%">
</td></tr>
</table>

<pre style="margin-left:17%; margin-top: 1em">  nmake
  nmake install</pre>


<p style="margin-left:11%; margin-top: 1em">If you want to
create a <small>PPM</small> package for the ActiveState Perl
version, then modify the above steps as follows: Run</p>

<pre style="margin-left:11%; margin-top: 1em">  perl Makefile.PL NAME=DBD&minus;mysql BINARY_LOCATION=DBD&minus;mysql.tar.gz
  nmake ppd
  nmake</pre>


<p style="margin-left:11%; margin-top: 1em">Once that is
done, use tar and gzip (for example those from the CygWin32
distribution) to create an archive:</p>

<pre style="margin-left:11%; margin-top: 1em">  mkdir x86
  tar cf x86/DBD&minus;mysql.tar blib
  gzip x86/DBD&minus;mysql.tar</pre>


<p style="margin-left:11%; margin-top: 1em">Put the files
x86/DBD&minus;mysql.tar.gz and DBD&minus;mysql.ppd onto some
<small>WWW</small> server and install them by typing</p>

<pre style="margin-left:11%; margin-top: 1em">  install http://your.server.name/your/directory/DBD&minus;mysql.ppd</pre>


<p style="margin-left:11%; margin-top: 1em">in the
<small>PPM</small> program.</p>

<h2>AUTHORS
<a name="AUTHORS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Originally,
there was a non-DBI driver, Mysql, which was much like
<small>PHP</small> drivers such as mysql and mysqli. The
<b>Mysql</b> module was originally written by Andreas
KieXXnig &lt;koenig@kulturbox.de&gt; who still, to this day,
contributes patches to DBD::mysql. An emulated version of
Mysql was provided to DBD::mysql from Jochen Wiedmann, but
eventually deprecated as it was another bundle of code to
maintain.</p>

<p style="margin-left:11%; margin-top: 1em">The first
incarnation of DBD::mysql was developed by Alligator
Descartes, who was also aided and abetted by Gary Shea,
Andreas KieXXnig and Tim Bunce.</p>

<p style="margin-left:11%; margin-top: 1em">The current
incarnation of <b>DBD::mysql</b> was written by Jochen
Wiedmann, then numerous changes and bug-fixes were added by
Rudy Lippan. Next, prepared statement support was added by
Patrick Galbraith and Alexy Stroganov (who also soley added
embedded server support).</p>

<p style="margin-left:11%; margin-top: 1em">For the past
seven years DBD::mysql has been maintained by Patrick
Galbraith (<i>patg@patg.net</i>) along with the entire
community of Perl developers who keep sending patches and
making Patrick&rsquo;s job easier.</p>

<h2>CONTRIBUTIONS
<a name="CONTRIBUTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Anyone who
desires to contribute to this project is encouraged to do
so. Currently, the sourcecode for this project can be found
at Github:</p>


<p style="margin-left:11%; margin-top: 1em">git://github.com/CaptTofu/DBD&minus;mysql.git</p>

<p style="margin-left:11%; margin-top: 1em">Either fork
this repository and produce a branch with your changeset
that the maintainer can merge to his tree, or create a diff
with git. The maintainer is more than glad to take
contributions from the community as many features and fixes
from DBD::mysql have come from the community.</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This module is
Large Portions Copyright (c) 2004&minus;2010 Patrick
Galbraith Large Portions Copyright (c) 2004&minus;2006
Alexey Stroganov Large Portions Copyright (c)
2003&minus;2005 Rudolf Lippan Large Portions Copyright (c)
1997&minus;2003 Jochen Wiedmann, with code portions
Copyright (c)1994&minus;1997 their original authors This
module is released under the same license as Perl itself.
See the Perl <small>README</small> for details.</p>

<h2>MAILING LIST SUPPORT
<a name="MAILING LIST SUPPORT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This module is
maintained and supported on a mailing list, dbi-users.</p>

<p style="margin-left:11%; margin-top: 1em">To subscribe to
this list, send and email to</p>


<p style="margin-left:11%; margin-top: 1em">dbi&minus;users&minus;subscribe@perl.org</p>

<p style="margin-left:11%; margin-top: 1em">Mailing list
archives are at</p>


<p style="margin-left:11%; margin-top: 1em">http://groups.google.com/group/perl.dbi.users?hl=en&amp;lr=</p>

<p style="margin-left:11%; margin-top: 1em">Also, the main
<small>DBI</small> site is at</p>


<p style="margin-left:11%; margin-top: 1em">http://dbi.perl.org/</p>

<p style="margin-left:11%; margin-top: 1em">And source:</p>


<p style="margin-left:11%; margin-top: 1em">git://github.com/CaptTofu/DBD&minus;mysql.git</p>

<h2>ADDITIONAL DBI INFORMATION
<a name="ADDITIONAL DBI INFORMATION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Additional
information on the <small>DBI</small> project can be found
on the World Wide Web at the following
<small>URL:</small></p>

<pre style="margin-left:11%; margin-top: 1em">    http://dbi.perl.org</pre>


<p style="margin-left:11%; margin-top: 1em">where
documentation, pointers to the mailing lists and mailing
list archives and pointers to the most current versions of
the modules can be used.</p>

<p style="margin-left:11%; margin-top: 1em">Information on
the <small>DBI</small> interface itself can be gained by
typing:</p>

<pre style="margin-left:11%; margin-top: 1em">    perldoc DBI</pre>


<p style="margin-left:11%; margin-top: 1em">Information on
the DBD::mysql specifically can be gained by typing:</p>

<pre style="margin-left:11%; margin-top: 1em">    perldoc DBD::mysql</pre>


<h2>BUG REPORTING, ENHANCEMENT/FEATURE REQUESTS
<a name="BUG REPORTING, ENHANCEMENT/FEATURE REQUESTS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Please report
bugs, including all the information needed such as
DBD::mysql version, MySQL version, <small>OS</small>
type/version, etc to this link:</p>


<p style="margin-left:11%; margin-top: 1em">http://rt.cpan.org</p>

<p style="margin-left:11%; margin-top: 1em">Note: until
recently, MySQL/Sun/Oracle responded to bugs and assisted in
fixing bugs which many thanks should be given for their
help! This driver is outside the realm of the numerous
components they support, and the maintainer and community
solely support DBD::mysql</p>

<h2>POD ERRORS
<a name="POD ERRORS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Hey! <b>The
above document had some coding errors, which are explained
below:</b> <br>
Around line 1315:</p>

<p style="margin-left:17%;">&rsquo;=item&rsquo; outside of
any &rsquo;=over&rsquo;</p>

<p style="margin-left:11%;">Around line 1464:</p>

<p style="margin-left:17%;">You forgot a
&rsquo;=back&rsquo; before &rsquo;=head1&rsquo;</p>

<p style="margin-left:11%;">Around line 1727:</p>

<p style="margin-left:17%;">You forgot a
&rsquo;=back&rsquo; before &rsquo;=head1&rsquo;</p>

<p style="margin-left:11%;">Around line 2070:</p>

<p style="margin-left:17%;">Non-ASCII character seen before
=encoding in &rsquo;KieXXnig&rsquo;. Assuming
<small>UTF&minus;8</small></p>
<hr>
</body>
</html>
